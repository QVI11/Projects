#include <iostream>
#include <vector>

using namespace std;

int minOperations(long long n, long long k) {
    if (n == 0) return 0;
    if (k == 1) return n;
    
    int operations = 0;
    while (n > 0) {
        long long power = 1;
        while (power <= n) {
            power *= k;
        }
        power /= k;  // Go back to the largest power that doesn't exceed n
        
        if (power == 0) power = 1;  // Handle the case where k > n
        
        n -= power;
        operations++;
    }
    
    return operations;
}

int main() {
    int t;
    cin >> t;
    
    vector<pair<long long, long long>> inputs(t);
    vector<int> results(t);
    
    // Collect all inputs
    for (int i = 0; i < t; i++) {
        cin >> inputs[i].first >> inputs[i].second;
    }
    
    // Calculate results
    for (int i = 0; i < t; i++) {
        results[i] = minOperations(inputs[i].first, inputs[i].second);
    }
    
    // Print all results
    for (int i = 0; i < t; i++) {
        cout << results[i] << endl;
    }
    
    return 0;
}